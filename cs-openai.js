(()=>{let n;(()=>{const e="__app_hrp",t="production",r=!1;if(n=globalThis[e],n)return;const i={name:e,env:t,get:n=>n in i?i[n]:null,...JSON.parse('{"version":"11.4.0"}')},o=function n(e){const t=e===i,o=t&&r,l={},a=n=>Object.assign(e,n),p=new Proxy(e,{get(r,i){if("assign"===i)return a;if(t&&!String(i).startsWith("$"))return e[i];if(!(i in e)){if(e[i]={},t){const n=s.bind(null,"log",i,!1),t=s.bind(null,"log",i,!0),r=s.bind(null,"warn",i,!1),o=s.bind(null,"warn",i,!0),l=s.bind(null,"error",i,!1),a=s.bind(null,"error",i,!0),p=c.bind(null,i);Object.defineProperties(e[i],{log:{get:()=>n},logDev:{get:()=>t},warn:{get:()=>r},warnDev:{get:()=>o},error:{get:()=>l},errorDev:{get:()=>a},Error:{get:()=>p}})}l[i]=n(e[i]),o&&(globalThis[i]=e[i])}return i in l?l[i]:e[i]},set:(n,t,r)=>(e[t]=r,l[t]=r,o&&(globalThis[t]=e[t]),!0)});return p}(i);function s(n,e,t,...r){if(t)return;const[i,o,s]=function(n){let e=0;n.split("").forEach(((t,r)=>{e=n.charCodeAt(r)+((e<<5)-e)}));return[(16711680&e)>>16,(65280&e)>>8,255&e]}(e);console[n](`%c[${e}]`,`color: rgb(${i}, ${o}, ${s})`,...r)}function c(n,e,...t){return t.length>0&&s("error",n,!1,e,...t),new Error(`[${n}] ${e}`)}globalThis[e]=o,n=o})(),(()=>{const{$ai:e}=n;e.arkoseController={init(){this._isArkoseIframe()&&(this._config=this._getConfig(),this._config&&(this._patchFetch(),this._patchHeadAppendChild(),this._patchEnforcement()))},_isArkoseIframe:()=>window!==window.top&&window.name.startsWith("ae:"),_getConfig(){try{return JSON.parse(window.name.replace("ae:",""))}catch(n){return e.error("failed to parse config",n),null}},_patchFetch(){const n=this._config.siteParam,e=this._config.chatUrl;this._execute(`\n          <script>\n            const fetch0 = globalThis.fetch\n            globalThis.fetch = function (...args) {\n              const opts = args[1]\n              if (\n                typeof opts.body === 'string' &&\n                opts.body.startsWith('${this._config.bodyStartsWith}')\n              ) {\n                opts.body = opts.body.replace(\n                  /&${n}=[^&]+/,\n                  '&${n}=${encodeURIComponent(e)}'\n                )\n              }\n              return fetch0.call(this, ...args)\n            }\n          <\/script>\n        `)},_patchHeadAppendChild(){const n=this._config.dataSiteParam,e=this._config.chatUrl;this._execute(`\n          <script>\n            const appendChild = HTMLElement.prototype.appendChild\n            HTMLElement.prototype.appendChild = function (...args) {\n              const elem = args[0]\n              if (\n                this === document.head &&\n                elem &&\n                elem.tagName === 'SCRIPT' &&\n                elem.src\n              ) {\n                const url = new window.URL(elem.src)\n                const site = url.searchParams.get('${n}')\n                if (site) {\n                  url.searchParams.set('${n}', '${e}')\n                  elem.src = url.href\n                }\n              }\n              return appendChild.call(this, ...args)\n            }\n          <\/script>\n        `)},_patchEnforcement(){if(!this._config.enforcement)return;const n=JSON.stringify(this._config.enforcement);this._execute(`\n          <script>\n            const _sent_ = Symbol('sent')\n            const _isSDK_ = Symbol('isSDK')\n            const enf = JSON.parse('${n}')\n    \n            \n            Object.defineProperty(Object.prototype, enf.$sent, {\n              get () {\n                return this[_sent_]\n              },\n              set (value) {\n                if (value && value[enf.$ef]) {\n                  applyObject(value[enf.$ef], enf.ef)\n                }\n                this[_sent_] = value\n                return true\n              },\n            })\n    \n            \n            Object.defineProperty(Object.prototype, enf.$isSDK, {\n              get () {\n                applyObject(this, enf.config)\n                return this[_isSDK_]\n              },\n              set (value) {\n                this[_isSDK_] = value\n                return true\n              },\n            })\n    \n            function isObject (any) {\n              return Object.prototype.toString.call(any) === '[object Object]'\n            }\n    \n            function applyObject (obj1, obj2) {\n              for (const key in obj2) {\n                if (isObject(obj1[key])) {\n                  applyObject(obj1[key], obj2[key])\n                } else {\n                  obj1[key] = obj2[key]\n                }\n              }\n            }\n          <\/script>\n        `)},_execute(n){n=n.replace("<script>","(() => {").replace("<\/script>","})()");const e=document.createElement("div");e.setAttribute("onreset",n),e.dispatchEvent(new Event("reset"))}}})(),(()=>{const{$ai:e}=n;e.controller={init(){e.arkoseController.init()}}})(),(()=>{const{$startup:e,$ai:t}=n;e.openaiController={init(){t.controller.init()}},e.openaiController.init()})()})();